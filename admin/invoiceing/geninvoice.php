<?php
include("../db.inc.php");
define('FPDF_FONTPATH','../font/');
require('../fpdf.php');

$OutPutType = 'I';

class PDF extends FPDF
{
	function Header()
	{
		$TopY = 30;
		$this->SetDrawColor(77,4,140);
		$this->SetLineWidth(0.5);
		$this->Line(10, 13, 10, 285);
		$this->SetLineWidth(0.3);
		$this->SetDrawColor(140,145,146);
		$this->Line(8, 275, 198, 275);
		$this->SetLineWidth(0.1);
		$this->SetDrawColor(0);
	}

	function Footer()
	{
		$TopY = 200;
		$RememberTop1 = $TopY;
		$this->SetXY(20, $TopY);
		$this->SetFont('Arial','B',12);
		$this->Cell(90, 6, "Direct Deposit", 1, 0, 'C');
		$this->SetFont('Arial','',12);
		$TopY += 6;
		$this->SetXY(20, $TopY);
		$this->Cell(40, 6, "Bank:", 1, 0, 'R');
		$this->SetXY(60, $TopY);
		$this->Cell(50, 6, "ABSA", 1, 0, 'C');
		$TopY += 6;
		$this->SetXY(20, $TopY);
		$this->Cell(40, 6, "Account Name:", 1, 0, 'R');
		$this->SetXY(60, $TopY);
		$this->Cell(50, 6, "Company (PTY) Ltd", 1, 0, 'C');
		$TopY += 6;
		$this->SetXY(20, $TopY);
		$this->Cell(40, 6, "Account No:", 1, 0, 'R');
		$this->SetXY(60, $TopY);
		$this->Cell(50, 6, "12 345 6789", 1, 0, 'C');
		$TopY += 6;
		$this->SetXY(20, $TopY);
		$this->Cell(40, 6, "Branch Code:", 1, 0, 'R');
		$this->SetXY(60, $TopY);
		$this->Cell(50, 6, "654321", 1, 0, 'C');
		$TopY += 6;
		$this->SetXY(20, $TopY);
		$this->Cell(40, 6, "Reference:", 1, 0, 'R');
		$this->SetXY(60, $TopY);
		$this->Cell(50, 6, "{CustomerNo}", 1, 0, 'C');
		$TopY = $RememberTop1;
		$TopY += 3;
		$this->SetXY(120, $TopY);
		$this->Cell(70, 6, "Login to your customer zone", 0, 0, 'C');
		$TopY += 6;
		$this->SetXY(120, $TopY);
		$this->Cell(70, 6, "for more payment options", 0, 0, 'C');
		$TopY += 6;
		$this->SetXY(120, $TopY);
		$this->SetFont('Arial','U',12);
		$this->Cell(70, 6, "http://clientzone.domain.com/", 0, 0, 'C');
		$this->SetFont('Arial','',12);
		$TopY += 6;
		$this->SetXY(120, $TopY);
		$this->Cell(70, 6, "Your registered email address", 0, 0, 'C');
		$TopY += 6;
		$this->SetXY(120, $TopY);
		$this->SetFont('Arial','U',12);
		$this->Cell(70, 6, "longemailaddress@domain.com", 0, 0, 'C');
		$this->SetFont('Arial','',10);
		$TopY += 12;
		$this->SetXY(15, $TopY);
		$LongText = "Please use your customer number, {CustomerNumber}, as the beneficiary payment reference. If you use the incorrect payment reference, your payment may not be allocated correctly which could lead to your account being suspended.";
		$this->MultiCell(180, 5, $LongText, 0);
		$TopY = 276;
		$this->SetFont('Arial','',8);
		$this->SetXY(14, $TopY);
		$this->SetTextColor(0);
		$this->Cell(35, 5, "Company (PTY) Ltd.", 0);
		$this->Cell(29, 5, "2016/123456/07", 0);
		$TopY += 4;
		$this->SetXY(15, $TopY);
		$this->SetTextColor(77,4,140);
		$this->Cell(3, 5, "(t)", 0, 0, 'C');
		$this->SetTextColor(0);
		$this->Cell(29, 5, "+27 (0) 11 555 1234", 0);
		$this->SetTextColor(77,4,140);
		$this->Cell(3, 5, "(w)", 0, 0, 'C');
		$this->SetTextColor(0);
		$this->Cell(28, 5, "www.domain.com", 0);
		$this->SetTextColor(77,4,140);
		$this->Cell(3, 5, "(e)", 0, 0, 'C');
		$this->SetTextColor(0);
		$this->Cell(29, 5, "hello@domain.com", 0);
		$this->SetTextColor(77,4,140);
		$this->Cell(3, 5, "(a)", 0, 0, 'C');
		$this->SetTextColor(0);
		$this->Cell(71, 5, "123 Office Park, RoadHere Rd, Suburb, 0000", 0);
		$IniLogo = "../images/brandicon.png";
		$this->Image($IniLogo, 187, 276, 10);
	}
}

$pdf = new PDF();
$pdf->AliasNbPages();
$pdf->AddPage('P');

$TopY = 30;
$IniLogo = "../images/logo 658x150.png";
$pdf->Image($IniLogo, 15, 13, 80);
$pdf->SetFont('Arial','',8);
$pdf->SetXY(19, $TopY);
$pdf->SetTextColor(77,4,140);
$pdf->Cell(3, 5, "(w)", 0, 0, 'C');
$pdf->SetTextColor(0);
$pdf->Cell(28, 5, "www.domain.com", 0);
$pdf->SetXY(60, $TopY);
$pdf->SetTextColor(77,4,140);
$pdf->Cell(3, 5, "(e)", 0, 0, 'C');
$pdf->SetTextColor(0);
$pdf->Cell(29, 5, "hello@domain.com", 0);
$TopY = 16;
$pdf->SetFont('Arial','',10);
$pdf->SetXY(100, $TopY);
$pdf->Cell(35, 5, "Company (PTY) Ltd.", 0);
$TopY += 5;
$pdf->SetXY(100, $TopY);
$pdf->Cell(29, 5, "Reg No. 2016/123456/07", 0);
$TopY += 5;
$pdf->SetXY(100, $TopY);
$pdf->Cell(29, 5, "Vat Reg No. 12 3456 7890", 0);
$TopY = 16;
$pdf->SetXY(150, $TopY);
$pdf->Cell(40, 5, "123 Office Park,", 0);
$TopY += 5;
$pdf->SetXY(150, $TopY);
$pdf->Cell(40, 5, "RoadHere Rd,", 0);
$TopY += 5;
$pdf->SetXY(150, $TopY);
$pdf->Cell(40, 5, "Suburb, 0000", 0);
$TopY += 12;
$pdf->SetFont('Arial','B',18);
$pdf->SetXY(100, $TopY);
$pdf->Cell(100, 10, "TAX INVOICE", 1, 0, 'C');
$TopY += 10;
$pdf->SetXY(100, $TopY);
$pdf->SetFont('Arial','B',12);
$pdf->Cell(50, 6, "Invoice Date", 1, 0, 'R');
$pdf->SetFont('Arial','',12);
$pdf->SetXY(150, $TopY);
$pdf->Cell(50, 6, date("d M Y"), 1, 0, 'C');
$pdf->SetFont('Arial','B',12);
$TopY += 6;
$pdf->SetXY(100, $TopY);
$pdf->SetFont('Arial','B',12);
$pdf->Cell(50, 6, "Invoice #", 1, 0, 'R');
$pdf->SetFont('Arial','',12);
$pdf->SetXY(150, $TopY);
$pdf->Cell(50, 6, "{InvoiceNum}", 1, 0, 'C');
$pdf->SetFont('Arial','B',12);
$TopY = 65;
$pdf->SetFont('Arial','',12);
$pdf->SetXY(15, $TopY);
$pdf->Cell(50, 5, "Customer Surname");
$pdf->SetFont('Arial','B',12);
$pdf->SetXY(90, $TopY);
$pdf->Cell(50, 6, "Customer No.", 0, 0, 'R');
$pdf->SetFont('Arial','',12);
$pdf->SetXY(142, $TopY);
$pdf->Cell(50, 6, "{CustomerNo}", 0, 0);
$pdf->SetFont('Arial','',12);
$TopY += 6;
$pdf->SetXY(15, $TopY);
$pdf->Cell(50, 5, "XX Complex Name");
$pdf->SetFont('Arial','B',12);
$pdf->SetXY(90, $TopY);
$pdf->Cell(50, 6, "Date Registered:", 0, 0, 'R');
$pdf->SetFont('Arial','',12);
$pdf->SetXY(142, $TopY);
$pdf->Cell(50, 6, "{RegisterDate}", 0, 0);
$pdf->SetFont('Arial','',12);
$TopY += 6;
$pdf->SetXY(15, $TopY);
$pdf->Cell(50, 5, "Suburb, Code");
$pdf->SetFont('Arial','B',12);
$pdf->SetXY(90, $TopY);
$pdf->Cell(50, 6, "Period:", 0, 0, 'R');
$pdf->SetFont('Arial','',12);
$pdf->SetXY(142, $TopY);
$pdf->Cell(50, 6, "1 May 2017 - 31 May 2017", 0, 0);
$pdf->SetFont('Arial','',12);
$TopY += 10;
$pdf->SetFont('Arial','B',12);
$pdf->SetXY(16, $TopY);
$pdf->Cell(80, 10, "Description", 1, 0, 'C');
$pdf->SetXY(96, $TopY);
$pdf->Cell(30, 10, "Qty", 1, 0, 'C');
$pdf->SetXY(126, $TopY);
$pdf->Cell(30, 10, "Unit Cost", 1, 0, 'C');
$pdf->SetXY(156, $TopY);
$pdf->Cell(40, 10, "Sub Total", 1, 0, 'C');

$SubTotal = 0;
for($i = 0; $i < 4; $i++)
{
	$TopY += 10;
	$pdf->SetFont('Arial','',12);
	$pdf->SetXY(16, $TopY);
	$pdf->Cell(110, 10, "Long description goes here", 1, 0, 'L');
	$pdf->SetXY(96, $TopY);
	$pdf->Cell(30, 10, "1234", 1, 0, 'C');
	$pdf->SetXY(126, $TopY);
	$pdf->Cell(30, 10, "R 123456.99", 1, 0, 'C');
	$pdf->SetXY(156, $TopY);
	$pdf->Cell(40, 10, "R 123456.99", 1, 0, 'C');
	$SubTotal += 1;
}
$Vat = sprintf("%0.2f", $SubTotal * 0.14);
$Total = sprintf("%0.2f", $SubTotal + $Vat);
$TopY += 10;
$pdf->SetXY(126, $TopY);
$pdf->SetFont('Arial','B',12);
$pdf->Cell(30, 10, "14% VAT", 1, 0, 'C');
$pdf->SetXY(156, $TopY);
$pdf->SetFont('Arial','',12);
$pdf->Cell(40, 10, "R " . $Vat, 1, 0, 'C');
$TopY += 10;
$pdf->SetXY(126, $TopY);
$pdf->SetFont('Arial','B',14);
$pdf->Cell(30, 10, "Total", 1, 0, 'C');
$pdf->SetXY(156, $TopY);
$pdf->SetFont('Arial','',12);
$pdf->Cell(40, 10, "R " . $Total, 1, 0, 'C');

$FileName = str_replace(" ", "_", "_Invoice_" . date("Ymd")) . ".pdf";
$pdf->Output($FileName, $OutPutType);
unset($pdf);
?>